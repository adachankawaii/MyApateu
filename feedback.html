<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BlueMoon â€” GÃ³p Ã½ & ÄÃ¡nh giÃ¡</title>
  <style>
    :root{
      --bg-grad-start:#3b82f6; --bg-grad-end:#1e3a8a;
      --text:#0b1226; --muted:#56607a; --card:#ffffff; --stroke:#e6eaf5;
      --toolbar-h:64px; --radius:18px;
      --shadow:0 18px 45px rgba(13,35,69,.18);
      --shadow-2:0 10px 28px rgba(13,35,69,.16);
    }
    [data-theme="dark"]{
      --bg-grad-start:#0f172a; --bg-grad-end:#0b1220;
      --text:#e5e7eb; --muted:#a3adc2; --card:#0b1226; --stroke:#1f2a44;
      --shadow:0 18px 45px rgba(0,0,0,.45); --shadow-2:0 10px 28px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
    body{
      color:var(--text);
      background: radial-gradient(1200px 800px at 70% 15%, var(--bg-grad-start) 0%, var(--bg-grad-end) 100%);
      overflow-x:hidden;
    }

    /* Toolbar */
    .toolbar{
      position:fixed; inset:0 0 auto 0; height:var(--toolbar-h);
      display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px;
      padding:0 16px; z-index:20; color:#fff;
      background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(0,0,0,.08));
      backdrop-filter: blur(6px); border-bottom:1px solid rgba(255,255,255,.18);
    }
    .icon-btn{
      display:inline-flex; align-items:center; justify-content:center;
      width:40px; height:40px; border-radius:999px; cursor:pointer;
      background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.18);
      box-shadow:0 6px 16px rgba(0,0,0,.25);
    }

    /* Main */
    .main{min-height:100%; padding-top:calc(var(--toolbar-h) + 28px); padding-bottom:40px;}
    .container{width:min(980px,92vw); margin:0 auto;}
    .title{margin:8px 0 18px; font-size:34px; font-weight:900; letter-spacing:.2px; color:#fff;}

    .card{
      background:var(--card); border:1px solid var(--stroke); border-radius:16px; box-shadow:var(--shadow-2);
      padding:20px; margin-bottom:16px;
    }
    h2{margin:0 0 12px; font-size:20px; color:var(--text)}
    h3{margin:0 0 8px; font-size:16px; color:var(--text)}
    p{margin:6px 0; color:var(--muted)}
    .grid{display:grid; gap:16px}
    @media (min-width: 720px){ .grid{grid-template-columns: 1fr 1fr;} }

    .btn{
      display:inline-flex; align-items:center; gap:8px; padding:10px 16px; border-radius:12px; border:1px solid var(--stroke);
      background:var(--card); cursor:pointer; box-shadow:var(--shadow-2); text-decoration:none; color:inherit;
      font-weight:600; transition:transform .1s ease;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:#2563eb; color:#fff; border-color:#2563eb}
    .btn.success{background:#16a34a; color:#fff; border-color:#16a34a}

    .tabs{
      display:flex; gap:4px; margin-bottom:20px; background:var(--stroke); border-radius:12px; padding:4px;
    }
    .tab{
      flex:1; padding:8px 16px; border-radius:8px; text-align:center; cursor:pointer;
      font-weight:600; transition:all .2s ease; border:none; background:transparent; color:var(--muted);
    }
    .tab.active{background:var(--card); color:var(--text); box-shadow:var(--shadow-2)}

    /* Forms */
    .form-group{margin-bottom:16px}
    .form-label{display:block; margin-bottom:6px; font-weight:600; color:var(--text)}
    .form-control{
      width:100%; padding:12px; border:1px solid var(--stroke); border-radius:8px;
      background:var(--card); color:var(--text); font-family:inherit;
    }
    .form-control:focus{outline:none; border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,.1)}
    textarea.form-control{min-height:100px; resize:vertical}
    select.form-control{cursor:pointer}

    /* Rating */
    .rating-group{display:flex; align-items:center; gap:12px; margin:12px 0}
    .rating-stars{display:flex; gap:4px}
    .star{
      width:24px; height:24px; cursor:pointer; color:#d1d5db; transition:color .2s ease;
      font-size:20px; user-select:none;
    }
    .star:hover, .star.active{color:#fbbf24}
    .rating-text{font-size:14px; color:var(--muted); margin-left:8px}

    /* Service cards */
    .service-card{
      border:1px solid var(--stroke); border-radius:12px; padding:16px; margin-bottom:12px;
      cursor:pointer; transition:all .2s ease;
    }
    .service-card:hover{box-shadow:var(--shadow-2); border-color:#3b82f6}
    .service-card.selected{border-color:#3b82f6; background:rgba(59,130,246,.05)}

    .service-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px}
    .service-name{font-weight:600; color:var(--text)}
    .service-desc{font-size:14px; color:var(--muted)}

    /* Feedback history */
    .feedback-item{
      border:1px solid var(--stroke); border-radius:12px; padding:16px; margin-bottom:12px;
      transition:box-shadow .2s ease;
    }
    .feedback-item:hover{box-shadow:var(--shadow-2)}

    .feedback-header{display:flex; justify-content:between; align-items:flex-start; margin-bottom:8px}
    .feedback-status{
      padding:4px 8px; border-radius:6px; font-size:12px; font-weight:600;
    }
    .status-pending{background:#fef3c7; color:#92400e}
    .status-processing{background:#dbeafe; color:#1e40af}
    .status-resolved{background:#dcfce7; color:#166534}
    [data-theme="dark"] .status-pending{background:#451a03; color:#fbbf24}
    [data-theme="dark"] .status-processing{background:#1e3a8a; color:#bfdbfe}
    [data-theme="dark"] .status-resolved{background:#052e16; color:#4ade80}

    .feedback-meta{font-size:12px; color:var(--muted); margin-bottom:8px}
    .feedback-content{color:var(--text); line-height:1.4; margin-bottom:8px}
    .feedback-response{
      background:rgba(59,130,246,.1); border-left:3px solid #3b82f6; padding:12px; border-radius:8px; margin-top:8px;
    }

    @media (max-width: 768px) {
      .tabs{flex-direction:column}
      .rating-group{flex-direction:column; align-items:flex-start}
    }
  </style>
</head>
<body>
  <!-- Toolbar -->
  <header class="toolbar" role="banner">
    <button class="icon-btn" id="btnBack">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
        <path d="M15 18l-6-6 6-6"/>
      </svg>
    </button>
    <div></div>
    <button class="icon-btn" id="btnNotifications">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 22a2.5 2.5 0 0 0 2.4-2H9.6A2.5 2.5 0 0 0 12 22Z" fill="white" opacity=".9"/>
        <path d="M19 17H5l1.2-1.8A2 2 0 0 0 7 14v-3a5 5 0 1 1 10 0v3c0 .4.1.8.3 1.2L19 17Z" stroke="white" stroke-width="1.8" fill="none" opacity=".9"/>
      </svg>
    </button>
  </header>

  <!-- Content -->
  <main class="main">
    <div class="container">
      <h1 class="title">GÃ³p Ã½ & ÄÃ¡nh giÃ¡</h1>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" onclick="showTab('rating')">â­ ÄÃ¡nh giÃ¡ dá»‹ch vá»¥</button>
        <button class="tab" onclick="showTab('suggestion')">ğŸ’¡ GÃ³p Ã½</button>
        <button class="tab" onclick="showTab('complaint')">ğŸ“ Khiáº¿u náº¡i</button>
        <button class="tab" onclick="showTab('history')">ğŸ“‹ Lá»‹ch sá»­</button>
      </div>

      <!-- Rating Tab -->
      <div id="tab-rating" class="tab-content">
        <section class="card">
          <h2>â­ ÄÃ¡nh giÃ¡ dá»‹ch vá»¥ tÃ²a nhÃ </h2>
          <p>ÄÃ¡nh giÃ¡ cháº¥t lÆ°á»£ng dá»‹ch vá»¥ Ä‘á»ƒ chÃºng tÃ´i cáº£i thiá»‡n tá»‘t hÆ¡n</p>

          <!-- Service Rating -->
          <div class="service-card" onclick="selectService(this, 'security')">
            <div class="service-header">
              <div class="service-name">ğŸ›¡ï¸ An ninh báº£o vá»‡</div>
              <div class="rating-stars" data-service="security">
                <span class="star" data-rating="1">â˜…</span>
                <span class="star" data-rating="2">â˜…</span>
                <span class="star" data-rating="3">â˜…</span>
                <span class="star" data-rating="4">â˜…</span>
                <span class="star" data-rating="5">â˜…</span>
              </div>
            </div>
            <div class="service-desc">ÄÃ¡nh giÃ¡ vá» dá»‹ch vá»¥ báº£o vá»‡, kiá»ƒm soÃ¡t ra vÃ o, an ninh chung</div>
          </div>

          <div class="service-card" onclick="selectService(this, 'maintenance')">
            <div class="service-header">
              <div class="service-name">ğŸ”§ Báº£o trÃ¬ ká»¹ thuáº­t</div>
              <div class="rating-stars" data-service="maintenance">
                <span class="star" data-rating="1">â˜…</span>
                <span class="star" data-rating="2">â˜…</span>
                <span class="star" data-rating="3">â˜…</span>
                <span class="star" data-rating="4">â˜…</span>
                <span class="star" data-rating="5">â˜…</span>
              </div>
            </div>
            <div class="service-desc">ÄÃ¡nh giÃ¡ vá» tá»‘c Ä‘á»™ xá»­ lÃ½, cháº¥t lÆ°á»£ng sá»­a chá»¯a</div>
          </div>

          <div class="service-card" onclick="selectService(this, 'cleaning')">
            <div class="service-header">
              <div class="service-name">ğŸ§¹ Vá»‡ sinh chung</div>
              <div class="rating-stars" data-service="cleaning">
                <span class="star" data-rating="1">â˜…</span>
                <span class="star" data-rating="2">â˜…</span>
                <span class="star" data-rating="3">â˜…</span>
                <span class="star" data-rating="4">â˜…</span>
                <span class="star" data-rating="5">â˜…</span>
              </div>
            </div>
            <div class="service-desc">ÄÃ¡nh giÃ¡ vá» Ä‘á»™ sáº¡ch sáº½ khu vá»±c chung, thang mÃ¡y, hÃ nh lang</div>
          </div>

          <div class="service-card" onclick="selectService(this, 'management')">
            <div class="service-header">
              <div class="service-name">ğŸ’¼ Ban quáº£n lÃ½</div>
              <div class="rating-stars" data-service="management">
                <span class="star" data-rating="1">â˜…</span>
                <span class="star" data-rating="2">â˜…</span>
                <span class="star" data-rating="3">â˜…</span>
                <span class="star" data-rating="4">â˜…</span>
                <span class="star" data-rating="5">â˜…</span>
              </div>
            </div>
            <div class="service-desc">ÄÃ¡nh giÃ¡ vá» thÃ¡i Ä‘á»™ phá»¥c vá»¥, xá»­ lÃ½ váº¥n Ä‘á» cá»§a ban quáº£n lÃ½</div>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ’­ Nháº­n xÃ©t thÃªm</label>
            <textarea class="form-control" id="ratingComment" placeholder="Chia sáº» Ã½ kiáº¿n cá»¥ thá»ƒ vá» dá»‹ch vá»¥..."></textarea>
          </div>

          <button class="btn primary" onclick="submitRating()">ğŸŒŸ Gá»­i Ä‘Ã¡nh giÃ¡</button>
        </section>
      </div>

      <!-- Suggestion Tab -->
      <div id="tab-suggestion" class="tab-content" style="display:none">
        <section class="card">
          <h2>ğŸ’¡ GÃ³p Ã½ cáº£i thiá»‡n</h2>
          <p>Chia sáº» Ã½ tÆ°á»Ÿng Ä‘á»ƒ cáº£i thiá»‡n dá»‹ch vá»¥ vÃ  tiá»‡n Ã­ch tÃ²a nhÃ </p>

          <div class="form-group">
            <label class="form-label">ğŸ“ Chá»§ Ä‘á» gÃ³p Ã½</label>
            <select class="form-control" id="suggestionTopic">
              <option value="">-- Chá»n chá»§ Ä‘á» --</option>
              <option value="facility">ğŸ¢ CÆ¡ sá»Ÿ váº­t cháº¥t</option>
              <option value="service">ğŸ¯ Dá»‹ch vá»¥ má»›i</option>
              <option value="event">ğŸ‰ Sá»± kiá»‡n cá»™ng Ä‘á»“ng</option>
              <option value="technology">ğŸ’» CÃ´ng nghá»‡</option>
              <option value="environment">ğŸŒ± MÃ´i trÆ°á»ng</option>
              <option value="other">ğŸ”„ KhÃ¡c</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ’¡ TiÃªu Ä‘á» gÃ³p Ã½</label>
            <input type="text" class="form-control" id="suggestionTitle" placeholder="VD: Láº¯p Ä‘áº·t tráº¡m sáº¡c xe Ä‘iá»‡n">
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ“„ MÃ´ táº£ chi tiáº¿t</label>
            <textarea class="form-control" id="suggestionContent" placeholder="MÃ´ táº£ chi tiáº¿t Ã½ tÆ°á»Ÿng cá»§a báº¡n, lá»£i Ã­ch mang láº¡i vÃ  cÃ¡ch thá»±c hiá»‡n..."></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ¯ Má»©c Ä‘á»™ Æ°u tiÃªn</label>
            <select class="form-control" id="suggestionPriority">
              <option value="low">ğŸŸ¢ Tháº¥p - CÃ³ thá»ƒ thá»±c hiá»‡n trong tÆ°Æ¡ng lai</option>
              <option value="medium">ğŸŸ¡ Trung bÃ¬nh - NÃªn thá»±c hiá»‡n trong nÄƒm</option>
              <option value="high">ğŸ”´ Cao - Cáº§n thá»±c hiá»‡n sá»›m</option>
            </select>
          </div>

          <button class="btn primary" onclick="submitSuggestion()">ğŸ“¨ Gá»­i gÃ³p Ã½</button>
        </section>
      </div>

      <!-- Complaint Tab -->
      <div id="tab-complaint" class="tab-content" style="display:none">
        <section class="card">
          <h2>ğŸ“ Khiáº¿u náº¡i</h2>
          <p>BÃ¡o cÃ¡o cÃ¡c váº¥n Ä‘á» cáº§n Ä‘Æ°á»£c xá»­ lÃ½ kháº©n cáº¥p</p>

          <div class="form-group">
            <label class="form-label">âš ï¸ Loáº¡i khiáº¿u náº¡i</label>
            <select class="form-control" id="complaintType">
              <option value="">-- Chá»n loáº¡i khiáº¿u náº¡i --</option>
              <option value="noise">ğŸ”Š Tiáº¿ng á»“n</option>
              <option value="water">ğŸ’§ Váº¥n Ä‘á» nÆ°á»›c</option>
              <option value="elevator">ğŸ›— Thang mÃ¡y</option>
              <option value="parking">ğŸš— BÃ£i Ä‘á»— xe</option>
              <option value="security">ğŸ›¡ï¸ An ninh</option>
              <option value="waste">ğŸ—‘ï¸ RÃ¡c tháº£i</option>
              <option value="neighbor">ğŸ‘¥ HÃ ng xÃ³m</option>
              <option value="other">ğŸ”„ KhÃ¡c</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ“ Vá»‹ trÃ­ sá»± viá»‡c</label>
            <input type="text" class="form-control" id="complaintLocation" placeholder="VD: Táº§ng 5, cÄƒn há»™ 502, thang mÃ¡y A...">
          </div>

          <div class="form-group">
            <label class="form-label">â° Thá»i gian xáº£y ra</label>
            <input type="datetime-local" class="form-control" id="complaintTime">
          </div>

          <div class="form-group">
            <label class="form-label">ğŸ“ MÃ´ táº£ sá»± viá»‡c</label>
            <textarea class="form-control" id="complaintContent" placeholder="MÃ´ táº£ chi tiáº¿t váº¥n Ä‘á», tÃ¡c Ä‘á»™ng vÃ  yÃªu cáº§u xá»­ lÃ½..."></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">ğŸš¨ Má»©c Ä‘á»™ kháº©n cáº¥p</label>
            <select class="form-control" id="complaintUrgency">
              <option value="low">ğŸŸ¢ Tháº¥p - CÃ³ thá»ƒ xá»­ lÃ½ trong vÃ i ngÃ y</option>
              <option value="medium">ğŸŸ¡ Trung bÃ¬nh - Cáº§n xá»­ lÃ½ trong 24h</option>
              <option value="high">ğŸ”´ Cao - Cáº§n xá»­ lÃ½ ngay</option>
              <option value="emergency">ğŸš¨ Kháº©n cáº¥p - Xá»­ lÃ½ tá»©c thÃ¬</option>
            </select>
          </div>

          <button class="btn primary" onclick="submitComplaint()">ğŸš¨ Gá»­i khiáº¿u náº¡i</button>
        </section>
      </div>

      <!-- History Tab -->
      <div id="tab-history" class="tab-content" style="display:none">
        <section class="card">
          <h2>ğŸ“‹ Lá»‹ch sá»­ gÃ³p Ã½ & khiáº¿u náº¡i</h2>
          
          <div class="feedback-item">
            <div class="feedback-header">
              <div>
                <h3>ğŸ’¡ Láº¯p Ä‘áº·t tráº¡m sáº¡c xe Ä‘iá»‡n</h3>
                <div class="feedback-status status-processing">Äang xá»­ lÃ½</div>
              </div>
            </div>
            <div class="feedback-meta">ğŸ“… Gá»­i ngÃ y: 15/09/2025 â€¢ ğŸ·ï¸ GÃ³p Ã½ cÆ¡ sá»Ÿ váº­t cháº¥t</div>
            <div class="feedback-content">Äá» xuáº¥t láº¯p Ä‘áº·t tráº¡m sáº¡c xe Ä‘iá»‡n táº¡i khu vá»±c bÃ£i Ä‘á»— xe Ä‘á»ƒ phá»¥c vá»¥ cÆ° dÃ¢n cÃ³ xe Ä‘iá»‡n...</div>
            <div class="feedback-response">
              <strong>ğŸ“¢ Pháº£n há»“i tá»« ban quáº£n lÃ½:</strong><br>
              Cáº£m Æ¡n gÃ³p Ã½. ChÃºng tÃ´i Ä‘ang kháº£o sÃ¡t chi phÃ­ vÃ  tÃ¬m nhÃ  cung cáº¥p. Dá»± kiáº¿n hoÃ n thÃ nh kháº£o sÃ¡t vÃ o cuá»‘i thÃ¡ng 10.
            </div>
          </div>

          <div class="feedback-item">
            <div class="feedback-header">
              <div>
                <h3>ğŸ”Š Tiáº¿ng á»“n tá»« táº§ng trÃªn</h3>
                <div class="feedback-status status-resolved">ÄÃ£ giáº£i quyáº¿t</div>
              </div>
            </div>
            <div class="feedback-meta">ğŸ“… Gá»­i ngÃ y: 08/09/2025 â€¢ ğŸ·ï¸ Khiáº¿u náº¡i tiáº¿ng á»“n</div>
            <div class="feedback-content">CÄƒn há»™ táº§ng trÃªn cÃ³ tiáº¿ng á»“n lá»›n vÃ o ban Ä‘Ãªm, áº£nh hÆ°á»Ÿng Ä‘áº¿n giáº¥c ngá»§...</div>
            <div class="feedback-response">
              <strong>ğŸ“¢ Káº¿t quáº£ xá»­ lÃ½:</strong><br>
              ÄÃ£ liÃªn há»‡ vÃ  nháº¯c nhá»Ÿ cÆ° dÃ¢n. Váº¥n Ä‘á» Ä‘Ã£ Ä‘Æ°á»£c giáº£i quyáº¿t. Náº¿u tiáº¿p tá»¥c xáº£y ra, vui lÃ²ng bÃ¡o láº¡i.
            </div>
          </div>

          <div class="feedback-item">
            <div class="feedback-header">
              <div>
                <h3>ğŸ‰ Tá»• chá»©c tiá»‡c BBQ mÃ¹a hÃ¨</h3>
                <div class="feedback-status status-resolved">ÄÃ£ thá»±c hiá»‡n</div>
              </div>
            </div>
            <div class="feedback-meta">ğŸ“… Gá»­i ngÃ y: 20/08/2025 â€¢ ğŸ·ï¸ GÃ³p Ã½ sá»± kiá»‡n</div>
            <div class="feedback-content">Äá» xuáº¥t tá»• chá»©c tiá»‡c BBQ cho cÆ° dÃ¢n vÃ o cuá»‘i tuáº§n Ä‘á»ƒ tÄƒng cÆ°á»ng giao lÆ°u...</div>
            <div class="feedback-response">
              <strong>ğŸ“¢ Káº¿t quáº£:</strong><br>
              ÄÃ£ tá»• chá»©c thÃ nh cÃ´ng vÃ o ngÃ y 05/09. Cáº£m Æ¡n Ã½ tÆ°á»Ÿng tuyá»‡t vá»i! Sá»± kiá»‡n thu hÃºt 45 gia Ä‘Ã¬nh tham gia.
            </div>
          </div>
        </section>
      </div>

      <div style="margin-top:20px; text-align:center">
        <a href="home_resident.html" class="btn">â† Vá» trang chá»§</a>
      </div>
    </div>
  </main>

  <script>
    // Äá»“ng bá»™ theme
    const theme = localStorage.getItem('bm_theme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);
    
    // Navigation
    document.getElementById('btnBack').addEventListener('click', () => {
      window.location.href = 'home_resident.html';
    });

    document.getElementById('btnNotifications').addEventListener('click', () => {
      alert('1 pháº£n há»“i má»›i cho gÃ³p Ã½ cá»§a báº¡n');
    });

    // Tab switching
    function showTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(`tab-${tabName}`).style.display = 'block';
      event.target.classList.add('active');
    }

    // Rating system
    document.querySelectorAll('.rating-stars').forEach(ratingGroup => {
      const stars = ratingGroup.querySelectorAll('.star');
      let currentRating = 0;
      
      stars.forEach((star, index) => {
        star.addEventListener('click', () => {
          currentRating = index + 1;
          updateStars(stars, currentRating);
          
          const service = ratingGroup.dataset.service;
          console.log(`Rated ${service}: ${currentRating} stars`);
        });
        
        star.addEventListener('mouseenter', () => {
          updateStars(stars, index + 1);
        });
      });
      
      ratingGroup.addEventListener('mouseleave', () => {
        updateStars(stars, currentRating);
      });
    });

    function updateStars(stars, rating) {
      stars.forEach((star, index) => {
        if (index < rating) {
          star.classList.add('active');
        } else {
          star.classList.remove('active');
        }
      });
    }

    function selectService(card, serviceType) {
      // Remove previous selection
      document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
      // Add selection to clicked card
      card.classList.add('selected');
    }

    // Form submissions
    function submitRating() {
      const ratings = {};
      document.querySelectorAll('.rating-stars').forEach(group => {
        const service = group.dataset.service;
        const activeStars = group.querySelectorAll('.star.active').length;
        if (activeStars > 0) {
          ratings[service] = activeStars;
        }
      });
      
      const comment = document.getElementById('ratingComment').value;
      
      if (Object.keys(ratings).length === 0) {
        alert('âš ï¸ Vui lÃ²ng Ä‘Ã¡nh giÃ¡ Ã­t nháº¥t má»™t dá»‹ch vá»¥');
        return;
      }
      
      alert('âœ… Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘Ã¡nh giÃ¡!\nChÃºng tÃ´i sáº½ cáº£i thiá»‡n dá»‹ch vá»¥ dá»±a trÃªn gÃ³p Ã½ cá»§a báº¡n.');
      
      // Reset form
      document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
      document.getElementById('ratingComment').value = '';
      document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
    }

    function submitSuggestion() {
      const topic = document.getElementById('suggestionTopic').value;
      const title = document.getElementById('suggestionTitle').value;
      const content = document.getElementById('suggestionContent').value;
      const priority = document.getElementById('suggestionPriority').value;
      
      if (!topic || !title || !content) {
        alert('âš ï¸ Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin');
        return;
      }
      
      alert('ğŸ’¡ GÃ³p Ã½ Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng!\nMÃ£ sá»‘: #GOY2025001\nChÃºng tÃ´i sáº½ xem xÃ©t vÃ  pháº£n há»“i trong 7 ngÃ y lÃ m viá»‡c.');
      
      // Reset form
      document.getElementById('suggestionTopic').value = '';
      document.getElementById('suggestionTitle').value = '';
      document.getElementById('suggestionContent').value = '';
      document.getElementById('suggestionPriority').value = 'low';
    }

    function submitComplaint() {
      const type = document.getElementById('complaintType').value;
      const location = document.getElementById('complaintLocation').value;
      const time = document.getElementById('complaintTime').value;
      const content = document.getElementById('complaintContent').value;
      const urgency = document.getElementById('complaintUrgency').value;
      
      if (!type || !location || !content) {
        alert('âš ï¸ Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin báº¯t buá»™c');
        return;
      }
      
      let responseTime = '3-5 ngÃ y lÃ m viá»‡c';
      if (urgency === 'emergency') responseTime = 'trong 1 giá»';
      else if (urgency === 'high') responseTime = 'trong 24 giá»';
      else if (urgency === 'medium') responseTime = 'trong 2 ngÃ y';
      
      alert(`ğŸš¨ Khiáº¿u náº¡i Ä‘Ã£ Ä‘Æ°á»£c tiáº¿p nháº­n!\nMÃ£ sá»‘: #KN2025001\nThá»i gian xá»­ lÃ½ dá»± kiáº¿n: ${responseTime}\n\nChÃºng tÃ´i sáº½ liÃªn há»‡ vá»›i báº¡n sá»›m nháº¥t cÃ³ thá»ƒ.`);
      
      // Reset form
      document.getElementById('complaintType').value = '';
      document.getElementById('complaintLocation').value = '';
      document.getElementById('complaintTime').value = '';
      document.getElementById('complaintContent').value = '';
      document.getElementById('complaintUrgency').value = 'low';
    }

    // Set default datetime
    document.getElementById('complaintTime').value = new Date().toISOString().slice(0, 16);
  </script>
</body>
</html>