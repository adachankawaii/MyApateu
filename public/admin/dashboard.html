<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BlueMoon ‚Äî Trang ch·ªß</title>
  <style>
    :root{
      --bg-grad-start:#3b82f6; --bg-grad-end:#1e3a8a;
      --text:#0b1226; --muted:#56607a; --card:#ffffff; --stroke:#e6eaf5;
      --toolbar-h:64px; --radius:18px;
      --shadow:0 18px 45px rgba(13,35,69,.18);
      --shadow-2:0 10px 28px rgba(13,35,69,.16);
      --icon:#1e3a8a;
    }
    /* Dark theme */
    [data-theme="dark"]{
      --bg-grad-start:#0f172a; --bg-grad-end:#0b1220;
      --text:#e5e7eb; --muted:#a3adc2; --card:#0b1226; --stroke:#1f2a44;
      --shadow:0 18px 45px rgba(0,0,0,.45); --shadow-2:0 10px 28px rgba(0,0,0,.35);
      --icon:#dbeafe;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
    body{
      color:var(--text);
      background: radial-gradient(1200px 800px at 70% 15%, var(--bg-grad-start) 0%, var(--bg-grad-end) 100%);
      overflow-x:hidden;
      position:relative;
    }

    /* ===== N·ªÅn to√† nh√† ===== */
    .scene{
      position:absolute; inset:0; pointer-events:none; z-index:0;
      opacity:.35; 
      transform: translateZ(0);
      backface-visibility: hidden;
    }
    .sky-sheen{
      position:absolute; inset:-10% -10% auto -10%; height:60%;
      background: radial-gradient(45% 40% at 75% 25%, rgba(255,255,255,.15), rgba(255,255,255,0) 60%);
    }
    .city{
      position:absolute; left:50%; bottom:-2%; transform:translateX(-50%) translateZ(0);
      width:1200px; max-width:160vw; height:55vh;
    }
    .tower{
      position:absolute; bottom:0;
      width: var(--w,140px); height: var(--h,46vh);
      border-radius:16px; 
      background: linear-gradient(180deg, rgba(59,130,246,.75), rgba(30,58,138,.85));
      transform: translateZ(0);
      backface-visibility: hidden;
    }
    .tower::after{
      content:""; position:absolute; inset:12% 14% 10% 14%;
      background:
        repeating-linear-gradient(#0000 0 20px, #0000 0 50px, rgba(255,255,255,.4) 0 65px),
        repeating-linear-gradient(90deg, #0000 0 28px, #0000 0 60px, rgba(255,255,255,.35) 0 75px);
      opacity:.12; border-radius:10px;
    }
    .t1{ --w:140px; --h:45vh; left:5%; }
    .t3{ --w:170px; --h:52vh; left:22%; }
    .t5{ --w:220px; --h:56vh; left:42%; border-radius:20px; }
    .t7{ --w:160px; --h:48vh; left:65%; }
    .t9{ --w:190px; --h:54vh; left:82%; }

    /* ===== Toolbar ===== */
    .toolbar{
      position:fixed; inset:0 0 auto 0; height:var(--toolbar-h);
      display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px;
      padding:0 16px; z-index:20; color:#fff;
      background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(0,0,0,.08));
      backdrop-filter: blur(6px); border-bottom:1px solid rgba(255,255,255,.18);
      will-change: transform;
    }
    .icon-btn{
      display:inline-flex; align-items:center; justify-content:center;
      width:40px; height:40px; border-radius:999px; cursor:pointer;
      background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.18);
      box-shadow:0 6px 16px rgba(0,0,0,.25); 
      transition:transform .08s cubic-bezier(0.4, 0, 0.2, 1), background .08s ease;
      will-change: transform;
      position: relative;
    }
    .icon-btn:hover{transform:translateY(-1px);background:rgba(255,255,255,.2)}
    .icon-btn .badge{
      position: absolute;
      top: -4px;
      right: -4px;
      min-width: 20px;
      height: 20px;
      padding: 0 6px;
      border-radius: 10px;
      background: #ef4444;
      color: #fff;
      font-size: 11px;
      font-weight: 900;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid rgba(0,0,0,.3);
      box-shadow: 0 2px 8px rgba(239,68,68,.6);
    }
    
    /* ===== Search Box & Dropdown ===== */
    .search-wrapper{position:relative;flex:1;}
    .search{display:flex;align-items:center;gap:8px;height:40px;padding:0 12px;border-radius:999px;background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.18);transition:background .15s ease;}
    .search:focus-within{background:rgba(255,255,255,.22);border-color:rgba(255,255,255,.35);}
    .search input{flex:1;height:100%;background:transparent;border:0;outline:0;color:#fff;font-size:14px;}
    .search input::placeholder{color:rgba(255,255,255,.75)}
    
    .search-results{
      position:absolute;top:calc(100% + 8px);left:0;right:0;
      background:#fff;border-radius:14px;box-shadow:0 8px 32px rgba(0,0,0,.25);
      max-height:420px;overflow:auto;z-index:100;
      display:none;
    }
    .search-results.show{display:block;}
    .search-result-item{
      display:flex;align-items:center;gap:12px;padding:12px 16px;
      border-bottom:1px solid #f0f0f0;cursor:pointer;
      transition:background .12s ease;
    }
    .search-result-item:last-child{border-bottom:none;}
    .search-result-item:hover{background:#f8f9fa;}
    .search-result-icon{
      width:40px;height:40px;border-radius:10px;
      background:linear-gradient(135deg,#3b82f6,#1e40af);
      display:grid;place-items:center;flex-shrink:0;
    }
    .search-result-icon svg{width:22px;height:22px;fill:#fff;}
    .search-result-text{flex:1;min-width:0;}
    .search-result-title{font-weight:700;font-size:14px;color:#0f172a;margin:0 0 2px;}
    .search-result-desc{font-size:12px;color:#64748b;margin:0;}
    .search-empty{padding:24px;text-align:center;color:#94a3b8;font-size:13px;font-weight:600;}

    /* ===== Main wrapper ===== */
    .main{min-height:100%; padding-top:calc(var(--toolbar-h) + 28px); padding-bottom:92px;}
    .container{width:min(1180px,92vw); margin:0 auto;}

    .welcome{display:flex; align-items:center; gap:10px; color:#dbeafe; font-weight:800; margin:14px 2px;}
    .welcome .dot{width:8px;height:8px;border-radius:999px;background:#22c55e;box-shadow:0 0 12px #22c55e}
    .title{margin:0 2px 18px; font-size:32px; font-weight:900; letter-spacing:.2px; color:#fff;}

    /* ===== Grid ===== */
    .grid{ display:grid; gap:22px; grid-template-columns: repeat(3, 1fr); }
    @media (max-width: 980px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 620px){ .grid{grid-template-columns: 1fr;} }

    .tile-wire{
      border:1px solid var(--stroke);
      border-radius:14px; overflow:hidden; background:var(--card);
      cursor:pointer; box-shadow: var(--shadow-2);
      transition: transform .1s cubic-bezier(0.4, 0, 0.2, 1), box-shadow .1s cubic-bezier(0.4, 0, 0.2, 1);
      display:grid; grid-template-rows: 190px 86px;
      will-change: transform;
    }

    .tile-wire:hover{ transform:translateY(-2px); box-shadow: var(--shadow); }

    /* top with sprite icon */
    .tile-wire .top{
      background:linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
      display:grid; place-items:center;
    }
    [data-theme="dark"] .tile-wire .top{
      background:linear-gradient(180deg, rgba(17,24,39,.65), rgba(17,24,39,.35));
    }
    .tile-wire .top .ico{
      width:86px; height:86px; fill:var(--icon);
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.18));
    }

    .tile-wire .bottom{
      background:#e6e6e6; border-top:1px solid var(--stroke);
      padding:12px 14px; display:flex; flex-direction:column; justify-content:center;
    }

    /* Dark: d·∫£i ch·ªØ m√†u tr·∫Øng (light gi·ªØ nguy√™n) */
    [data-theme="dark"] .tile-wire .bottom{ background:#ffffff; }
    .tile-wire .title{ margin:0; font-weight:900; font-size:16px; line-height:1.15; color:#111827; }
    .tile-wire .desc{ margin:4px 0 0; font-size:13px; color:#374151; line-height:1.25; }


    /* ===== Sidebar (Account/Web settings) ===== */
    .overlay{position:fixed; inset:0; background:rgba(0,0,0,.35); opacity:0; visibility:hidden; transition:.22s ease; z-index:29}
    .overlay.open{opacity:1; visibility:visible}

    .sidebar{
      position:fixed; top:0; right:0; height:100%; width:min(380px,94vw);
      background:var(--card); color:var(--text); border-left:1px solid var(--stroke);
      transform:translateX(100%); transition:transform .28s ease; z-index:30; display:flex; flex-direction:column;
      box-shadow: var(--shadow);
    }
    .sidebar.open{transform:translateX(0)}
    .side-header{display:flex; align-items:center; gap:12px; padding:16px; border-bottom:1px solid var(--stroke)}
    .avatar{width:48px;height:48px;border-radius:999px;background:linear-gradient(135deg,#60a5fa,#3b82f6); display:grid; place-items:center; color:#0b1226; font-weight:900}
    .who .name{font-weight:900}
    .who .role{color:var(--muted); font-size:12px; font-weight:700; letter-spacing:.3px}
    .side-body{padding:14px; display:grid; gap:12px; overflow:auto}

    .setting{
      border:1px solid var(--stroke); border-radius:14px; padding:12px 14px; background:color-mix(in oklab, var(--card) 98%, transparent);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .setting h4{margin:0; font-size:14px}
    .setting small{color:var(--muted)}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; border:1px solid var(--stroke); background:var(--card); cursor:pointer}
    .btn.primary{background:#2563eb; color:#fff; border-color:#2563eb}
    .btn.warn{background:#ef4444; color:#fff; border-color:#ef4444}

    .seg{display:inline-flex; border:1px solid var(--stroke); border-radius:999px; overflow:hidden; background:var(--card)}
    .seg button{padding:8px 12px; border:0; background:transparent; color:var(--muted); cursor:pointer; font-weight:700}
    .seg button.active{background:#2563eb; color:#fff}

    .switch{position:relative; width:48px; height:28px; border-radius:999px; background:#cbd5e1; border:1px solid var(--stroke); cursor:pointer}
    .switch::after{
      content:""; position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:999px; background:#fff; transition:left .2s ease;
      box-shadow:0 3px 8px rgba(0,0,0,.25)
    }
    .switch.on{background:#2563eb}
    .switch.on::after{left:23px}

    /* ===== PAGER (‚Äπ / ‚Ä∫) ===== */
    .pager{
      margin-top:14px; display:flex; align-items:center; gap:10px; justify-content:flex-end;
    }
    .pager .nav{
      width:42px; height:42px; border-radius:12px; border:1px solid var(--stroke);
      background:var(--card); cursor:pointer; display:grid; place-items:center;
      box-shadow: var(--shadow-2);
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease, background .12s ease;
      user-select:none;
    }
    .pager .nav:active{ transform: scale(.98); }
    .pager .nav[disabled]{opacity:.55; cursor:not-allowed; box-shadow:none}

    /* DARK: n√∫t tr·∫Øng, icon/ch·ªØ t·ªëi */
    [data-theme="dark"] .pager .nav{
      background:#ffffff; border-color:#ffffff22; color:#0b1226;
    }

    /* Gi·ªØ c·ª•m s·ªë kh√¥ng x√™ d·ªãch */
    .pager .dots{
      font-weight:700; letter-spacing:.3px;
      min-width:4.5ch; text-align:center;
      color:#dbeafe;
    }
    [data-theme="dark"] .pager .dots{ color:#c7d2fe; }
    /* Trang 2: Coming soon */
    .coming-card{
      grid-column: 1 / -1;
      border:1px solid var(--stroke);
      border-radius:18px;
      background:var(--card);
      box-shadow: var(--shadow-2);
      padding:48px 18px;
      text-align:center;
    }
    .coming-card h3{ margin:0; font-size:26px; font-weight:900; color:var(--text); }
    .coming-card p{ margin:8px 0 0; color:var(--muted); font-weight:700; }

    /* Hi·ªáu ·ª©ng slide m∆∞·ª£t cho grid */
    .grid.anim { 
      animation: slideIn .18s cubic-bezier(0.4, 0, 0.2, 1) both;
    }

    /* ===== Modal Notifications ===== */
    .modal-overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.5);
      display:none;align-items:center;justify-content:center;z-index:100;
    }
    .modal-overlay.show{display:flex;}
    .modal-card{
      width:min(600px,94vw);max-height:85vh;
      background:var(--card);border:1px solid var(--stroke);
      border-radius:var(--radius);box-shadow:var(--shadow);
      display:flex;flex-direction:column;
    }
    .modal-header{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 18px;border-bottom:1px solid var(--stroke);
    }
    .modal-header h3{margin:0;font-size:18px;font-weight:900;color:var(--text);}
    .modal-body{
      padding:14px 18px;overflow:auto;flex:1;
    }
    .noti-item{
      padding:12px;margin-bottom:10px;
      border:1px solid var(--stroke);border-radius:12px;
      background:color-mix(in oklab, var(--card) 98%, transparent);
    }
    .noti-item .noti-title{
      font-weight:900;font-size:14px;margin-bottom:4px;color:var(--text);
    }
    .noti-item .noti-info{
      font-size:12px;color:var(--muted);margin-bottom:6px;
    }
    .noti-item .noti-amount{
      font-size:15px;font-weight:900;color:#ef4444;
    }
    .noti-empty{
      padding:40px 20px;text-align:center;color:var(--muted);font-size:14px;
    }

    /* ===== Footnote ===== */
    .footnote{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:10;
      background:rgba(255,255,255,.12);
      border-top:1px solid rgba(255,255,255,.2);
      backdrop-filter: blur(10px);
      color:#eaf2ff;
      padding:12px 0;
    }
    .footnote .inner{
      width:min(1180px,92vw);
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .footnote .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .footnote .left{
      font-weight:800;
      letter-spacing:.2px;
      font-size:15px;
    }
    .footnote .right{
      font-size:12px;
      opacity:.85;
      font-weight:700;
    }
    .footnote .bottom{
      font-size:11px;
      opacity:.75;
      font-weight:600;
      letter-spacing:.2px;
    }

    @keyframes slideIn { 
      from { opacity:0; transform: translateX(var(--dx, 0)); } 
      to   { opacity:1; transform:none; } 
    }

    @media (prefers-reduced-motion: reduce){ *{transition:none !important; animation:none !important} }
  </style>
</head>
<footer class="footnote" aria-label="Th√¥ng tin h·ªá th·ªëng">
  <div class="inner">
    <div class="top">
      <div class="left">BlueMoon Admin</div>
      <div class="right">Demo build ‚Ä¢ v0.1 ‚Ä¢ ¬© 2025</div>
    </div>
    <div class="bottom">N·∫øu c√≥ v·∫•n ƒë·ªÅ, h√£y li√™n h·ªá tr·ª±c ti·∫øp ban qu·∫£n l√Ω chung c∆∞</div>
  </div>
</footer>

<body>
  <!-- ===== N·ªÅn to√† nh√† ===== -->
  <div class="scene" aria-hidden="true">
    <div class="sky-sheen"></div>
    <div class="city">
      <div class="tower t1"></div>
      <div class="tower t3"></div>
      <div class="tower t5"></div>
      <div class="tower t7"></div>
      <div class="tower t9"></div>
    </div>
  </div>

  <!-- ===== SVG SPRITE ===== -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <symbol id="ico-residents" viewBox="0 0 24 24"><path d="M8 13a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm8 3c2.761 0 5 2.239 5 5H11c0-2.761 2.239-5 5-5Zm-8-3c3.314 0 6 2.239 6 5H2c0-2.761 2.686-5 6-5Zm8-2a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"/></symbol>
    <symbol id="ico-buildings" viewBox="0 0 24 24"><path d="M3 22V6l8-4 8 4v16H3Zm6-10H7v2h2v-2Zm0-4H7v2h2V8Zm4 4h-2v2h2v-2Zm0-4h-2v2h2V8Zm4 8h-2v2h2v-2Z"/></symbol>
    <symbol id="ico-tickets" viewBox="0 0 24 24"><path d="M21 7.5 16.5 3 9 10.5l-1 3.5 3.5-1L21 7.5ZM7 19h10v2H7v-2Z"/></symbol>
    <symbol id="ico-billing" viewBox="0 0 24 24"><path d="M4 4h16v14H4V4Zm2 3h12v2H6V7Zm0 4h8v2H6v-2Zm0 4h6v2H6v-2Z"/></symbol>
    <symbol id="ico-board" viewBox="0 0 24 24"><path d="M3 10h5l7-4v12l-7-4H3v-4Zm16 0h2v4h-2v-4Z"/></symbol>
    <symbol id="ico-parking" viewBox="0 0 24 24"><path d="M5 4h8a5 5 0 1 1 0 10H9v6H5V4Zm4 6h4a2 2 0 1 0 0-4H9v4Z"/></symbol>
    <symbol id="ico-calendar" viewBox="0 0 24 24"><path d="M7 2h2v3h6V2h2v3h3v17H4V5h3V2Zm12 7H5v11h14V9Z"/></symbol>
    <symbol id="ico-system" viewBox="0 0 24 24"><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm8.94 3-1.26-.97.18-1.58-1.86-1.08-1.29.97-1.5-.58-.58-1.5h-2l-.58 1.5-1.5.58-1.29-.97-1.86 1.08.18 1.58L3.06 11v2l1.26.97-.18 1.58 1.86 1.08 1.29-.97 1.5.58.58 1.5h2l.58-1.5 1.5-.58 1.29.97 1.86-1.08-.18-1.58L20.94 13v-2Z"/></symbol>
  </svg>

  <!-- ===== Toolbar ===== -->
  <header class="toolbar" role="banner">
    <button class="icon-btn" id="btnDrawer" aria-label="M·ªü c√†i ƒë·∫∑t t√†i kho·∫£n" aria-controls="drawer" aria-expanded="false">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 6h16M4 12h12M4 18h16" stroke="white" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    <div class="search-wrapper">
      <label class="search" for="siteSearch" aria-label="T√¨m ki·∫øm">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <circle cx="11" cy="11" r="7" stroke="white" stroke-width="1.8" opacity=".9"/>
          <path d="M20 20l-3.2-3.2" stroke="white" stroke-width="1.8" stroke-linecap="round" opacity=".9"/>
        </svg>
        <input id="siteSearch" type="search" placeholder="T√¨m ki·∫øm ch·ª©c nƒÉng..." autocomplete="off" />
      </label>
      <div class="search-results" id="searchResults"></div>
    </div>
    <button class="icon-btn" id="btnNoti" aria-label="Th√¥ng b√°o">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 22a2.5 2.5 0 0 0 2.4-2H9.6A2.5 2.5 0 0 0 12 22Z" fill="white" opacity=".9"/>
        <path d="M19 17H5l1.2-1.8A2 2 0 0 0 7 14v-3a5 5 0 1 1 10 0v3c0 .4.1.8.3 1.2L19 17Z" stroke="white" stroke-width="1.8" fill="none" opacity=".9"/>
      </svg>
      <span class="badge" id="notiBadge" style="display:none">0</span>
    </button>
  </header>

  <!-- ===== Overlay & Sidebar ===== -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <!-- ===== Modal Notifications ===== -->
  <div class="modal-overlay" id="notiModal">
    <div class="modal-card">
      <div class="modal-header">
        <h3>üîî Th√¥ng b√°o kho·∫£n thu qu√° h·∫°n</h3>
        <button class="btn" id="closeNotiModal">‚úï</button>
      </div>
      <div class="modal-body" id="notiModalBody">
        <div class="noti-empty">ƒêang t·∫£i...</div>
      </div>
    </div>
  </div>

  <aside class="sidebar" id="drawer" role="complementary" aria-label="C√†i ƒë·∫∑t t√†i kho·∫£n & Web">
    <div class="side-header">
      <div class="avatar">B</div>
      <div class="who">
        <div class="name">Ada Lovelace</div>
        <div class="role" id="roleLabel">Admin ‚Äî Qu·∫£n tr·ªã chung c∆∞</div>
      </div>
      <button class="btn" id="btnCloseDrawer" aria-label="ƒê√≥ng">‚úï</button>
    </div>

    <div class="side-body">
      <div class="setting">
        <div><h4 id="profileTitle">H·ªì s∆° c√° nh√¢n</h4><small id="profileSub">Xem & c·∫≠p nh·∫≠t th√¥ng tin c·ªßa b·∫°n.</small></div>
        <button class="btn" id = "btnProfile">‚Üí</button>
      </div>

      <div class="setting">
        <div><h4 id="helpTitle">Tr·ª£ gi√∫p - H·ªó tr·ª£</h4><small id="helpSub">G·ª≠i y√™u c·∫ßu h·ªó tr·ª£ k·ªπ thu·∫≠t.</small></div>
        <button class="btn" id = "btnHelp">‚Üí</button>
      </div>

      <div class="setting">
        <div><h4 id="howTitle">C√°ch d√πng</h4><small id="howSub">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng BlueMoon.</small></div>
        <button class="btn" id = "btnHowto">‚Üí</button>
      </div>

      <div class="setting">
        <div>
          <h4 id="aboutTitle">Gi·ªõi thi·ªáu</h4>
          <small id="aboutSub">Phi√™n b·∫£n & th√¥ng tin gi·∫•y ph√©p.</small>
        </div>
        <!-- chuy·ªÉn h∆∞·ªõng sang about.html -->
        <button class="btn" id="btnAbout">‚Üí</button>
      </div>


      <div class="setting">
        <div><h4 id="logoutTitle">ƒêƒÉng xu·∫•t</h4><small id="logoutSub">Tho√°t v√† quay l·∫°i m√†n h√¨nh ƒëƒÉng nh·∫≠p.</small></div>
        <button class="btn warn" id="btnLogout">‚á¶</button>
      </div>
    </div>
  </aside>

  <!-- ===== Main Content ===== -->
  <main class="main">
    <div class="container">
      <div class="welcome"><span class="dot"></span><span id="welcomeText">Ch√†o m·ª´ng Admin ƒë·∫øn BlueMoon!</span></div>
      <h1 class="title" id="pageTitle">B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã chung c∆∞</h1>

      <section class="grid" id="featureGrid" aria-label="C√°c ch·ª©c nƒÉng qu·∫£n l√Ω"></section>

      <!-- PAGER -->
      <div class="pager" id="pager">
        <button class="nav" id="btnPrev" aria-label="Xem c√°c m·ª•c tr∆∞·ªõc">‚Äπ</button>
        <div class="dots" id="dots">1 / 2</div>
        <button class="nav" id="btnNext" aria-label="Xem c√°c m·ª•c sau">‚Ä∫</button>
      </div>
    </div>
  </main>

  <!-- Session & API Client -->
  <script src="../common/sessionClient.js"></script>
  <script src="../common/apiClient.js"></script>
  <script>
    // Check session tr∆∞·ªõc khi load trang
    (async function() {
      const isValid = await session.requireAuthAsync('/index.html');
      if (!isValid) return; // ƒê√£ redirect
      
      // Ki·ªÉm tra role admin
      if (!session.isAdmin()) {
        alert('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!');
        window.location.href = '/index.html';
        return;
      }
    })();
  </script>
  <script>
    /* ================= I18N ================= */
    const I18N = {
      vi: {
        welcome: "Ch√†o m·ª´ng Admin ƒë·∫øn BlueMoon!",
        pageTitle: "B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã chung c∆∞",
        feature: {
          residents_t: "C∆∞ d√¢n & CƒÉn h·ªô",
          residents_d: "Qu·∫£n l√Ω c∆∞ d√¢n, h·ª£p ƒë·ªìng, cƒÉn h·ªô v√† h·ªì s∆°.",
          buildings_t: "T√≤a nh√† & M·∫∑t b·∫±ng",
          buildings_d: "S∆° ƒë·ªì m·∫∑t b·∫±ng, block/t·∫ßng v√† ph√≤ng ban.",
          tickets_t: "B·∫£o tr√¨ & Ticket",
          tickets_d: "Ti·∫øp nh·∫≠n, x·ª≠ l√Ω v√† theo d√µi phi·∫øu b·∫£o tr√¨.",
          billing_t: "H√≥a ƒë∆°n & Thanh to√°n",
          billing_d: "Ph√≠ d·ªãch v·ª•, n∆∞·ªõc/ƒëi·ªán, xu·∫•t h√≥a ƒë∆°n.",
          board_t: "Th√¥ng b√°o & B·∫£ng tin",
          board_d: "T·∫°o b√†i, g·ª≠i broadcast t·ªõi c∆∞ d√¢n.",
          parking_t: "B√£i xe & Th·∫ª t·ª´",
          parking_d: "Qu·∫£n l√Ω ch·ªó ƒë·∫≠u, th·∫ª v√† l·ªãch s·ª≠ ra/v√†o.",
          calendar_t: "L·ªãch s·ª± ki·ªán",
          calendar_d: "S·ª± ki·ªán c·ªông ƒë·ªìng, l·ªãch b·∫£o tr√¨ ƒë·ªãnh k·ª≥.",
          system_t: "C√†i ƒë·∫∑t h·ªá th·ªëng",
          system_d: "Quy·ªÅn, vai tr√≤, c·∫•u h√¨nh to√†n c·ª•c.",
          pending: "T√≠nh nƒÉng demo ‚Äî b·∫°n c√≥ th·ªÉ g·∫Øn route th·ª±c t·∫ø."
        },
        sidebar: {
          role: "Admin ‚Äî Qu·∫£n tr·ªã chung c∆∞",
          profileTitle: "H·ªì s∆° c√° nh√¢n",
          profileSub: "Xem & c·∫≠p nh·∫≠t th√¥ng tin c·ªßa b·∫°n.",
          themeTitle: "Giao di·ªán",
          themeSub: "Chuy·ªÉn s√°ng / t·ªëi.",
          langTitle: "Ng√¥n ng·ªØ",
          langSub: "Ch·ªçn ng√¥n ng·ªØ hi·ªÉn th·ªã.",
          helpTitle: "Tr·ª£ gi√∫p - H·ªó tr·ª£",
          helpSub: "G·ª≠i y√™u c·∫ßu h·ªó tr·ª£ k·ªπ thu·∫≠t.",
          howTitle: "C√°ch d√πng",
          howSub: "H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng BlueMoon.",
          aboutTitle: "Gi·ªõi thi·ªáu",
          aboutSub: "Phi√™n b·∫£n & th√¥ng tin gi·∫•y ph√©p.",
          logoutTitle: "ƒêƒÉng xu·∫•t",
          logoutSub: "Tho√°t v√† quay l·∫°i m√†n h√¨nh ƒëƒÉng nh·∫≠p."
        }
      },
      en: {
        welcome: "Welcome Admin to BlueMoon!",
        pageTitle: "Condominium Admin Dashboard",
        feature: {
          residents_t: "Residents & Units",
          residents_d: "Manage residents, contracts, units and profiles.",
          buildings_t: "Buildings & Floorplan",
          buildings_d: "Blocks/floors layout and departments.",
          tickets_t: "Maintenance & Tickets",
          tickets_d: "Intake, process and track maintenance tickets.",
          billing_t: "Billing & Payments",
          billing_d: "Service fees, utilities, invoices.",
          board_t: "Announcements & Board",
          board_d: "Create posts and broadcast to residents.",
          parking_t: "Parking & RFID Cards",
          parking_d: "Spots, cards and entry/exit history.",
          calendar_t: "Events Calendar",
          calendar_d: "Community events and periodic maintenance.",
          system_t: "System Settings",
          system_d: "Permissions, roles, global config.",
          pending: "Demo feature ‚Äî wire up your real routes."
        },
        sidebar: {
          role: "Admin ‚Äî Building Management",
          profileTitle: "Profile",
          profileSub: "View & update your info.",
          themeTitle: "Theme",
          themeSub: "Toggle light / dark.",
          langTitle: "Language",
          langSub: "Choose display language.",
          helpTitle: "Help & Support",
          helpSub: "Send a support request.",
          howTitle: "How to use",
          howSub: "Guides for BlueMoon.",
          aboutTitle: "About",
          aboutSub: "Version & licensing info.",
          logoutTitle: "Sign out",
          logoutSub: "Back to login screen."
        }
      }
    };

    const state = {
      lang: 'vi',
      theme: 'light',
      page: 0,            // trang slider hi·ªán t·∫°i
      pageSize: 3,        // m·ªói trang 6 √¥
      lastDir: 'next'     // 'next' | 'prev' ƒë·ªÉ √°p hi·ªáu ·ª©ng
    };

    function t(path){
      const parts = path.split('.');
      let cur = I18N[state.lang];
      for(const p of parts){ cur = cur?.[p]; }
      return cur ?? path;
    }
    

    function renderTexts(){
      welcomeText.textContent = t('welcome');
      pageTitle.textContent   = t('pageTitle');

      roleLabel.textContent   = t('sidebar.role');
      profileTitle.textContent= t('sidebar.profileTitle');
      profileSub.textContent  = t('sidebar.profileSub');
      helpTitle.textContent   = t('sidebar.helpTitle');
      helpSub.textContent     = t('sidebar.helpSub');
      howTitle.textContent    = t('sidebar.howTitle');
      howSub.textContent      = t('sidebar.howSub');
      aboutTitle.textContent  = t('sidebar.aboutTitle');
      aboutSub.textContent    = t('sidebar.aboutSub');
      logoutTitle.textContent = t('sidebar.logoutTitle');
      logoutSub.textContent   = t('sidebar.logoutSub');
    }

    const tiles = [
      { id:'residents', t:'feature.residents_t', d:'feature.residents_d' },
      { id:'parking',   t:'feature.parking_t',   d:'feature.parking_d' },
      { id:'billing',   t:'feature.billing_t',   d:'feature.billing_d' },
    ];


    const ICON_MAP = {
      residents: 'ico-residents',
      buildings: 'ico-buildings',
      tickets:   'ico-tickets',
      billing:   'ico-billing',
      board:     'ico-board',
      parking:   'ico-parking',
      calendar:  'ico-calendar',
      system:    'ico-system',
    };
    function handleTileClick(id) {
      if (id === 'residents') {
        window.location.href = '/admin/residents.html';
        return;
      }
      if (id === 'billing') {
        window.location.href = '/admin/bills.html';
        return;
      }
      if (id === 'parking') {
        window.location.href = '/admin/parking.html';
        return;
      }
      alert(`${t(`feature.${id}_t`)} ‚Äî ${t('feature.pending')}`);
    }

    const svgUse = (tileId) =>
      `<svg class="ico" viewBox="0 0 24 24" aria-hidden="true"><use href="#${ICON_MAP[tileId]||'ico-system'}"></use></svg>`;

    function renderGrid(){
      const grid = document.getElementById('featureGrid');
      grid.innerHTML = '';

      // lu√¥n c√≥ 2 trang: trang 1 l√† 3 ch·ª©c nƒÉng, trang 2 l√† coming soon
      const totalPages = 2;

      if(state.page === 1){
        const box = document.createElement('div');
        box.className = 'coming-card';
        box.innerHTML = `
          <h3>Coming soon</h3>
          <p>Trang n√†y s·∫Ω c·∫≠p nh·∫≠t th√™m t√≠nh nƒÉng trong th·ªùi gian t·ªõi.</p>
        `;
        grid.appendChild(box);
      } else {
        const start = 0;
        const end = state.pageSize;
        const slice = tiles.slice(start, end);

        slice.forEach(tile=>{
          const el = document.createElement('article');
          el.className = 'tile-wire';
          el.innerHTML = `
            <div class="top" aria-hidden="true">${svgUse(tile.id)}</div>
            <div class="bottom">
              <h4 class="title">${t(tile.t)}</h4>
              <div class="desc">${t(tile.d)}</div>
            </div>`;
          el.addEventListener('click', () => handleTileClick(tile.id));
          grid.appendChild(el);
        });
      }

  // pager
  dots.textContent = `${state.page + 1} / ${totalPages}`;
  btnPrev.disabled = state.page <= 0;
  btnNext.disabled = state.page >= totalPages - 1;

  // slide animation
  grid.style.setProperty('--dx', state.lastDir === 'next' ? '24px' : '-24px');
  grid.classList.remove('anim');
  void grid.offsetWidth;
  grid.classList.add('anim');
}


    /* ===== Drawer ===== */
    const btnDrawer = document.getElementById('btnDrawer');
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('overlay');
    const btnClose = document.getElementById('btnCloseDrawer');

    function openDrawer(){
      drawer.classList.add('open'); overlay.classList.add('open');
      overlay.setAttribute('aria-hidden','false'); btnDrawer.setAttribute('aria-expanded','true');
      btnClose && btnClose.focus({preventScroll:true}); document.body.style.overflow='hidden';
    }
    function closeDrawer(){
      drawer.classList.remove('open'); overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden','true'); btnDrawer.setAttribute('aria-expanded','false');
      document.body.style.overflow=''; btnDrawer.focus({preventScroll:true});
    }
    btnDrawer.addEventListener('click', openDrawer);
    btnClose.addEventListener('click', closeDrawer);
    overlay.addEventListener('click', closeDrawer);
    window.addEventListener('keydown', e=>{ if(e.key==='Escape' && drawer.classList.contains('open')) closeDrawer(); });


    /* ===== Pager events ===== */
    btnPrev.addEventListener('click', ()=>{
      if(state.page>0){ state.lastDir = 'prev'; state.page--; renderGrid(); }
    });
    btnNext.addEventListener('click', ()=>{
      const totalPages = 2;
      if(state.page < totalPages-1){ state.lastDir = 'next'; state.page++; renderGrid(); }
    });

    /* ===== Misc ===== */
    const btnNoti = document.getElementById('btnNoti');
    const notiBadge = document.getElementById('notiBadge');
    const notiModal = document.getElementById('notiModal');
    const closeNotiModal = document.getElementById('closeNotiModal');
    const notiModalBody = document.getElementById('notiModalBody');
    
    let overdueCount = 0;
    let overdueItems = [];

    // Load th√¥ng b√°o kho·∫£n ph√≠ qu√° h·∫°n
    function loadOverdueNotifications(){
      fetch('/api/fees/overdue', {credentials:'include'})
        .then(r => r.json())
        .then(data => {
          if(data.ok && Array.isArray(data.items)){
            overdueItems = data.items;
            const unreadKey = 'bm_overdue_read';
            const readIds = JSON.parse(localStorage.getItem(unreadKey) || '[]');
            const unreadItems = overdueItems.filter(item => !readIds.includes(item.id));
            
            overdueCount = unreadItems.length;
            
            if(overdueCount > 0){
              notiBadge.textContent = overdueCount;
              notiBadge.style.display = 'flex';
            } else {
              notiBadge.style.display = 'none';
            }
          }
        })
        .catch(err => console.error('L·ªói load th√¥ng b√°o:', err));
    }

    // Hi·ªÉn th·ªã modal th√¥ng b√°o
    function showNotificationModal(){
      // ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
      const readIds = overdueItems.map(item => item.id);
      localStorage.setItem('bm_overdue_read', JSON.stringify(readIds));
      overdueCount = 0;
      notiBadge.style.display = 'none';

      // Render n·ªôi dung
      if(overdueItems.length === 0){
        notiModalBody.innerHTML = '<div class="noti-empty">Kh√¥ng c√≥ kho·∫£n thu n√†o qu√° h·∫°n üéâ</div>';
      } else {
        notiModalBody.innerHTML = overdueItems.map(item => {
          const dueDate = item.due_date ? new Date(item.due_date).toLocaleDateString('vi-VN') : '-';
          const remaining = Number(item.remaining || 0).toLocaleString('vi-VN');
          return (
            '<div class="noti-item">'+
              '<div class="noti-title">'+item.fee_name+' ‚Ä¢ Ph√≤ng '+(item.room_no||'-')+'</div>'+
              '<div class="noti-info">H·∫°n n·ªôp: '+dueDate+' ‚Ä¢ Lo·∫°i: '+(item.fee_type||'-')+'</div>'+
              '<div class="noti-amount">C√≤n thi·∫øu: '+remaining+'ƒë</div>'+
            '</div>'
          );
        }).join('');
      }

      notiModal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeNotificationModal(){
      notiModal.classList.remove('show');
      document.body.style.overflow = '';
    }

    btnNoti.addEventListener('click', showNotificationModal);
    closeNotiModal.addEventListener('click', closeNotificationModal);
    notiModal.addEventListener('click', e => {
      if(e.target === notiModal) closeNotificationModal();
    });

    // Load ngay khi trang load
    loadOverdueNotifications();
    
    // Refresh m·ªói 5 ph√∫t
    setInterval(loadOverdueNotifications, 5 * 60 * 1000);

    /* ===== Search Functionality ===== */
    const searchInput = document.getElementById('siteSearch');
    const searchResults = document.getElementById('searchResults');
    
    const FEATURE_ROUTES = {
      residents: '/admin/residents.html',
      buildings: '#',
      tickets: '#',
      billing: '/admin/bills.html',
      board: '#',
      parking: '/admin/parking.html',
      calendar: '#',
      system: '#'
    };

    function performSearch(query) {
      const q = query.toLowerCase().trim();
      if (!q) {
        searchResults.classList.remove('show');
        return;
      }

      const results = tiles.filter(tile => {
        const title = t(tile.t).toLowerCase();
        const desc = t(tile.d).toLowerCase();
        return title.includes(q) || desc.includes(q);
      });

      if (results.length === 0) {
        searchResults.innerHTML = '<div class="search-empty">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ ph√π h·ª£p</div>';
        searchResults.classList.add('show');
        return;
      }

      searchResults.innerHTML = results.map(tile => `
        <div class="search-result-item" data-feature="${tile.id}">
          <div class="search-result-icon">${svgUse(tile.id)}</div>
          <div class="search-result-text">
            <div class="search-result-title">${t(tile.t)}</div>
            <div class="search-result-desc">${t(tile.d)}</div>
          </div>
        </div>
      `).join('');
      
      searchResults.classList.add('show');

      // Add click handlers
      searchResults.querySelectorAll('.search-result-item').forEach(item => {
        item.addEventListener('click', () => {
          const featureId = item.getAttribute('data-feature');
          const route = FEATURE_ROUTES[featureId];
          if (route && route !== '#') {
            window.location.href = route;
          } else {
            alert(`${t(`feature.${featureId}_t`)} ‚Äî ${t('feature.pending')}`);
          }
        });
      });
    }

    searchInput.addEventListener('input', (e) => {
      performSearch(e.target.value);
    });

    searchInput.addEventListener('focus', (e) => {
      if (e.target.value.trim()) {
        performSearch(e.target.value);
      }
    });

    // Close search results when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.search-wrapper')) {
        searchResults.classList.remove('show');
      }
    });

    // Prevent closing when clicking inside search wrapper
    document.querySelector('.search-wrapper').addEventListener('click', (e) => {
      e.stopPropagation();
    });

    btnLogout.addEventListener('click', ()=> { 
      if (window.session && typeof session.logout === 'function') {
        session.logout('/index.html');
      } else {
        window.location.href = '/index.html';
      }
    });
    btnProfile.addEventListener('click', ()=> { window.location.href = '/common/profile.html'; });
    btnAbout.addEventListener('click', ()=> { window.location.href = '/common/about.html'; });
    btnHowto.addEventListener('click', ()=> { window.location.href = '/common/howto.html'; });
    btnHelp.addEventListener('click', ()=> { window.location.href = '/common/support.html'; });

    /* ===== Init ===== */
    (function init(){
      renderTexts();
      renderGrid();
    })();
  </script>

  <!-- quick refs for elements used in JS -->
  <script>
    const welcomeText = document.getElementById('welcomeText');
    const pageTitle   = document.getElementById('pageTitle');
    const roleLabel   = document.getElementById('roleLabel');
    const profileTitle= document.getElementById('profileTitle');
    const profileSub  = document.getElementById('profileSub');
    const helpTitle   = document.getElementById('helpTitle');
    const helpSub     = document.getElementById('helpSub');
    const howTitle    = document.getElementById('howTitle');
    const howSub      = document.getElementById('howSub');
    const aboutTitle  = document.getElementById('aboutTitle');
    const aboutSub    = document.getElementById('aboutSub');
    const logoutTitle = document.getElementById('logoutTitle');
    const logoutSub   = document.getElementById('logoutSub');
    const themeSwitch = document.getElementById('themeSwitch');
    const btnNoti     = document.getElementById('btnNoti');
    const siteSearch  = document.getElementById('siteSearch');
    const btnLogout   = document.getElementById('btnLogout');
    const btnProfile  = document.getElementById('btnProfile');
    const btnPrev     = document.getElementById('btnPrev');
    const btnNext     = document.getElementById('btnNext');
    const dots        = document.getElementById('dots');
    const btnAbout    = document.getElementById('btnAbout');
    const btnHowto   = document.getElementById('btnHowto');
    const btnHelp    = document.getElementById('btnHelp');
  </script>
</body>
</html>
